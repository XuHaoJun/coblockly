(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(364)}])},2140:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return App}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5893),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7294),blockly__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4948),blockly__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(blockly__WEBPACK_IMPORTED_MODULE_2__),next_dynamic__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5152),next_dynamic__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(next_dynamic__WEBPACK_IMPORTED_MODULE_3__),_Editor_module_scss__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9629),_Editor_module_scss__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_Editor_module_scss__WEBPACK_IMPORTED_MODULE_6__),_custom_Blocks__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5914),_editor_constant__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(19);let BlocklyWorkspace2=next_dynamic__WEBPACK_IMPORTED_MODULE_3___default()(()=>__webpack_require__.e(443).then(__webpack_require__.bind(__webpack_require__,3443)).then(e=>e.BlocklyWorkspace),{loadableGenerated:{webpack:()=>[3443]},ssr:!1});function App(){let[xml,setXml]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),[javascriptCode,setJavascriptCode]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(""),initialXml='<xml xmlns="https://developers.google.com/blockly/xml"><block type="pm_exec_chain_constantly" id="1$sxVDlG{EPMj8^euGM4" x="130" y="150"><statement name="CODE"><block type="controls_repeat_ext" id="E0s]rG=a{iZ.{gxCG{Vt"><value name="TIMES"><shadow type="math_number" id="zx4C-jd}31$?nJ^u-v4}"><field name="NUM">3</field></shadow></value><statement name="DO"><block type="pm_move_by_velocity" id="p(%z!KZ/Is+up1$C*)*a"><field name="ENTITY_ID">box2</field><field name="DIRECTION">FORWARD</field><value name="SECONDS"><block type="math_number" id="ha$eV%x.XR.vI^JU5Jw6"><field name="NUM">4</field></block></value><value name="DISTANCE"><block type="math_number" id="_lU{,qoHrr4d)TwXgL(z"><field name="NUM">5</field></block></value><next><block type="pm_set_color" id="EBLm0(vwdItRb,TR1Q5x"><field name="ENTITY_ID">box1</field><field name="COLOR">#ff0000</field><next><block type="pm_delay_seconds" id="TYPK+tM,E%N4Cbw!~-u#"><value name="VALUE"><block type="math_number" id="20PCBeDYZ],oh%o3qz8)"><field name="NUM">0.5</field></block></value><next><block type="pm_set_color" id="$[v^,F9Jzf%BCI5`m]!D"><field name="ENTITY_ID">box1</field><field name="COLOR">#009900</field><next><block type="pm_delay_seconds" id="glm*4fB-:I)-]@1YtZx9"><value name="VALUE"><block type="math_number" id="noV}_;M/f0cynWD-)X#y"><field name="NUM">0.5</field></block></value><next><block type="pm_set_color" id="^^k7c1g}Wc`s-.4Mq@$="><field name="ENTITY_ID">box1</field><field name="COLOR">#3333ff</field><next><block type="pm_delay_seconds" id="H3S*Mu)Y(dE[7+P@o=$t"><value name="VALUE"><block type="math_number" id="J?[M0TfP~KxG_t*OlH.n"><field name="NUM">0.5</field></block></value><next><block type="pm_move_by_velocity" id="o$05eL9Q$e@jX-wWIMO*"><field name="ENTITY_ID">box2</field><field name="DIRECTION">BACKWARD</field><value name="SECONDS"><block type="math_number" id="|bItW)Knipsnd;%|W9I7"><field name="NUM">1</field></block></value><value name="DISTANCE"><block type="math_number" id="amP7/%nIp98q-*2xgnYZ"><field name="NUM">5</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement></block></xml>',toolboxCategories=_editor_constant__WEBPACK_IMPORTED_MODULE_5__.E;function workspaceDidChange(e){let t=blockly__WEBPACK_IMPORTED_MODULE_2___default().JavaScript.workspaceToCode(e);console.log(t),setJavascriptCode(t)}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{style:{zIndex:1,height:60,width:80,position:"fixed",top:0,right:0,userSelect:"none"},onClick:()=>console.log(eval(javascriptCode)),children:"play"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:_Editor_module_scss__WEBPACK_IMPORTED_MODULE_6___default()["editor-wrapper"],children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(BlocklyWorkspace2,{toolboxConfiguration:toolboxCategories,initialXml:initialXml,className:_Editor_module_scss__WEBPACK_IMPORTED_MODULE_6___default()["editor-contianer"],workspaceConfiguration:{grid:{spacing:20,length:3,colour:"#ccc",snap:!0}},onWorkspaceChange:workspaceDidChange,onXmlChange:function(e){console.log(e)},onImportXmlError:function(e){},onInject:function(e){},onDispose:function(e){}})})]})}},5914:function(e,t,n){"use strict";var i=n(8256),o=n(5466),l=n.n(o);function s(){let e=document.querySelectorAll("a-scene > [scriptable]");return[...e.values()].map(e=>{let t=e.getAttribute("id");return[t,t]})}i.JavaScript=l().javascriptGenerator,i.Blocks.string_length={init:function(){this.appendValueInput("VALUE").setCheck("String").appendField("length of"),this.setOutput(!0,"Number"),this.setColour(160),this.setTooltip("Returns number of letters in the provided text."),this.setHelpUrl("http://www.w3schools.com/jsref/jsref_length_string.asp")}},i.JavaScript.string_length=function(e){return[(i.JavaScript.valueToCode(e,"VALUE",i.JavaScript.ORDER_FUNCTION_CALL)||"''")+".length",i.JavaScript.ORDER_MEMBER]},i.Blocks.pm_set_color={init:function(){this.appendDummyInput().appendField("設定").appendField(new i.FieldDropdown(this.generateOptions),"ENTITY_ID").appendField("顏色為").appendField(new i.FieldColour("#ff0000"),"COLOR"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")},generateOptions:function(){return s()}},i.JavaScript.pm_set_color=function(e){let t=e.getFieldValue("ENTITY_ID"),n=e.getFieldValue("COLOR");return"document.querySelector('#".concat(t,"')?.setAttribute('color', '").concat(n,"');\n")},i.Blocks.pm_exec_chain_constantly={init:function(){this.appendStatementInput("CODE").setCheck(null).appendField("當播放"),this.setColour(30),this.setTooltip(""),this.setHelpUrl("")}},i.JavaScript.pm_exec_chain_constantly=function(e){let t=i.JavaScript.statementToCode(e,"CODE");return"(async () => {".concat(t,"})();")},i.Blocks.pm_delay_seconds={init:function(){this.appendValueInput("VALUE").setCheck("Number").appendField("等待"),this.appendDummyInput().appendField("秒"),this.setInputsInline(!0),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")}},i.JavaScript.pm_delay_seconds=function(e){let t=1e3*i.JavaScript.valueToCode(e,"VALUE",i.JavaScript.ORDER_FUNCTION_CALL)||0;return"await new Promise((resolve) => setTimeout(resolve, ".concat(t,"));\n")},i.Blocks.pm_move_by_velocity={init:function(){this.appendValueInput("SECONDS").setCheck("Number").appendField("在"),this.appendDummyInput().appendField("秒內移動").appendField(new i.FieldDropdown(this.generateOptions),"ENTITY_ID"),this.appendValueInput("DISTANCE").setCheck("Number"),this.appendDummyInput().appendField("米").appendField(new i.FieldDropdown([["往前","FORWARD"],["往後","BACKWARD"],["向左","LEFT"],["向右","RIGHT"],["向上","UP"],["向下","DOWN"]]),"DIRECTION"),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setColour(230),this.setTooltip(""),this.setHelpUrl("")},generateOptions:function(){return s()}},i.JavaScript.pm_move_by_velocity=function(e){var t,n,o;let l=i.JavaScript.valueToCode(e,"SECONDS",i.JavaScript.ORDER_ATOMIC),s=e.getFieldValue("ENTITY_ID"),a=i.JavaScript.valueToCode(e,"DISTANCE",i.JavaScript.ORDER_ATOMIC),d=e.getFieldValue("DIRECTION"),c=a/l,p={RIGHT:1,LEFT:-1},r=(null!==(t=p[d])&&void 0!==t?t:0)*c,u={UP:1,DOWN:-1},m=(null!==(n=u[d])&&void 0!==n?n:0)*c,y={FORWARD:-1,BACKWARD:1},_=(null!==(o=y[d])&&void 0!==o?o:0)*c;return"\ndocument.querySelector('#".concat(s,'\')?.setAttribute("velocity", {x: ').concat(r,", y: ").concat(m,", z: ").concat(_,"});\nawait new Promise((resolve) => setTimeout(resolve, ").concat(1e3*l,"));\ndocument.querySelector('#").concat(s,'\')?.setAttribute("velocity", {x: ',0,", y: ",0,", z: ",0,"});\n\n")}},19:function(e,t,n){"use strict";n.d(t,{E:function(){return i}});let i={kind:"categoryToolbox",contents:[{kind:"category",name:"Logic",categorystyle:"logic_category",contents:[{type:"controls_if",kind:"block"},{type:"logic_compare",kind:"block",fields:{OP:"EQ"}},{type:"logic_operation",kind:"block",fields:{OP:"AND"}},{type:"logic_negate",kind:"block"},{type:"logic_boolean",kind:"block",fields:{BOOL:"TRUE"}},{type:"logic_null",kind:"block",enabled:!1},{type:"logic_ternary",kind:"block"}]},{kind:"category",name:"Loops",categorystyle:"loop_category",contents:[{type:"controls_repeat_ext",kind:"block",inputs:{TIMES:{shadow:{type:"math_number",fields:{NUM:10}}}}},{type:"controls_repeat",kind:"block",enabled:!1,fields:{TIMES:10}},{type:"controls_whileUntil",kind:"block",fields:{MODE:"WHILE"}},{type:"controls_for",kind:"block",fields:{VAR:{name:"i"}},inputs:{FROM:{shadow:{type:"math_number",fields:{NUM:1}}},TO:{shadow:{type:"math_number",fields:{NUM:10}}},BY:{shadow:{type:"math_number",fields:{NUM:1}}}}},{type:"controls_forEach",kind:"block",fields:{VAR:{name:"j"}}},{type:"controls_flow_statements",kind:"block",enabled:!1,fields:{FLOW:"BREAK"}}]},{kind:"category",name:"Math",categorystyle:"math_category",contents:[{type:"math_number",kind:"block",fields:{NUM:123}},{type:"math_arithmetic",kind:"block",fields:{OP:"ADD"},inputs:{A:{shadow:{type:"math_number",fields:{NUM:1}}},B:{shadow:{type:"math_number",fields:{NUM:1}}}}},{type:"math_single",kind:"block",fields:{OP:"ROOT"},inputs:{NUM:{shadow:{type:"math_number",fields:{NUM:9}}}}},{type:"math_trig",kind:"block",fields:{OP:"SIN"},inputs:{NUM:{shadow:{type:"math_number",fields:{NUM:45}}}}},{type:"math_constant",kind:"block",fields:{CONSTANT:"PI"}},{type:"math_number_property",kind:"block",fields:{PROPERTY:"EVEN"},inputs:{NUMBER_TO_CHECK:{shadow:{type:"math_number",fields:{NUM:0}}}}},{type:"math_round",kind:"block",fields:{OP:"ROUND"},inputs:{NUM:{shadow:{type:"math_number",fields:{NUM:3.1}}}}},{type:"math_on_list",kind:"block",fields:{OP:"SUM"}},{type:"math_modulo",kind:"block",inputs:{DIVIDEND:{shadow:{type:"math_number",fields:{NUM:64}}},DIVISOR:{shadow:{type:"math_number",fields:{NUM:10}}}}},{type:"math_constrain",kind:"block",inputs:{VALUE:{shadow:{type:"math_number",fields:{NUM:50}}},LOW:{shadow:{type:"math_number",fields:{NUM:1}}},HIGH:{shadow:{type:"math_number",fields:{NUM:100}}}}},{type:"math_random_int",kind:"block",inputs:{FROM:{shadow:{type:"math_number",fields:{NUM:1}}},TO:{shadow:{type:"math_number",fields:{NUM:100}}}}},{type:"math_random_float",kind:"block"},{type:"math_atan2",kind:"block",inputs:{X:{shadow:{type:"math_number",fields:{NUM:1}}},Y:{shadow:{type:"math_number",fields:{NUM:1}}}}}]},{kind:"category",name:"Text",categorystyle:"text_category",contents:[{type:"text",kind:"block",fields:{TEXT:""}},{type:"text_multiline",kind:"block",fields:{TEXT:""}},{type:"text_join",kind:"block"},{type:"text_append",kind:"block",fields:{name:"item"},inputs:{TEXT:{shadow:{type:"text",fields:{TEXT:""}}}}},{type:"text_length",kind:"block",inputs:{VALUE:{shadow:{type:"text",fields:{TEXT:"abc"}}}}},{type:"text_isEmpty",kind:"block",inputs:{VALUE:{shadow:{type:"text",fields:{TEXT:""}}}}},{type:"text_indexOf",kind:"block",fields:{END:"FIRST"},inputs:{VALUE:{block:{type:"variables_get",fields:{VAR:{name:"text"}}}},FIND:{shadow:{type:"text",fields:{TEXT:"abc"}}}}},{type:"text_charAt",kind:"block",fields:{WHERE:"FROM_START"},inputs:{VALUE:{block:{type:"variables_get",fields:{VAR:{name:"text"}}}}}},{type:"text_getSubstring",kind:"block",fields:{WHERE1:"FROM_START",WHERE2:"FROM_START"},inputs:{STRING:{block:{type:"variables_get",fields:{VAR:{name:"text"}}}}}},{type:"text_changeCase",kind:"block",fields:{CASE:"UPPERCASE"},inputs:{TEXT:{shadow:{type:"text",fields:{TEXT:"abc"}}}}},{type:"text_trim",kind:"block",fields:{MODE:"BOTH"},inputs:{TEXT:{shadow:{type:"text",fields:{TEXT:"abc"}}}}},{type:"text_count",kind:"block",inputs:{SUB:{shadow:{type:"text",fields:{TEXT:""}}},TEXT:{shadow:{type:"text",fields:{TEXT:""}}}}},{type:"text_replace",kind:"block",inputs:{FROM:{shadow:{type:"text",fields:{TEXT:""}}},TO:{shadow:{type:"text",fields:{TEXT:""}}},TEXT:{shadow:{type:"text",fields:{TEXT:""}}}}},{type:"text_reverse",kind:"block",inputs:{TEXT:{shadow:{type:"text",fields:{TEXT:""}}}}},{type:"text_print",kind:"block",inputs:{TEXT:{shadow:{type:"text",fields:{TEXT:"abc"}}}}},{type:"text_prompt_ext",kind:"block",fields:{TYPE:"TEXT"},inputs:{TEXT:{shadow:{type:"text",fields:{TEXT:"abc"}}}}}]},{kind:"category",name:"Lists",categorystyle:"list_category",contents:[{type:"lists_create_with",kind:"block"},{type:"lists_create_with",kind:"block"},{type:"lists_repeat",kind:"block",inputs:{NUM:{shadow:{type:"math_number",fields:{NUM:5}}}}},{type:"lists_length",kind:"block"},{type:"lists_isEmpty",kind:"block"},{type:"lists_indexOf",kind:"block",fields:{END:"FIRST"},inputs:{VALUE:{block:{type:"variables_get",fields:{VAR:{name:"list"}}}}}},{type:"lists_getIndex",kind:"block",fields:{MODE:"GET",WHERE:"FROM_START"},inputs:{VALUE:{block:{type:"variables_get",fields:{VAR:{name:"list"}}}}}},{type:"lists_setIndex",kind:"block",fields:{MODE:"SET",WHERE:"FROM_START"},inputs:{LIST:{block:{type:"variables_get",fields:{VAR:{name:"list"}}}}}},{type:"lists_getSublist",kind:"block",fields:{WHERE1:"FROM_START",WHERE2:"FROM_START"},inputs:{LIST:{block:{type:"variables_get",fields:{VAR:{name:"list"}}}}}},{type:"lists_split",kind:"block",fields:{MODE:"SPLIT"},inputs:{DELIM:{shadow:{type:"text",fields:{TEXT:","}}}}},{type:"lists_sort",kind:"block",fields:{TYPE:"NUMERIC",DIRECTION:"1"}},{type:"lists_reverse",kind:"block"}]},{kind:"category",categorystyle:"colour_category",name:"Colour",contents:[{type:"colour_picker",kind:"block",fields:{COLOUR:"#ff0000"}},{type:"colour_random",kind:"block"},{type:"colour_rgb",kind:"block",inputs:{RED:{shadow:{type:"math_number",fields:{NUM:100}}},GREEN:{shadow:{type:"math_number",fields:{NUM:50}}},BLUE:{shadow:{type:"math_number",fields:{NUM:0}}}}},{type:"colour_blend",kind:"block",inputs:{COLOUR1:{shadow:{type:"colour_picker",fields:{COLOUR:"#ff0000"}}},COLOUR2:{shadow:{type:"colour_picker",fields:{COLOUR:"#3333ff"}}},RATIO:{shadow:{type:"math_number",fields:{NUM:.5}}}}}]},{kind:"sep"},{kind:"category",name:"Variables",custom:"VARIABLE",categorystyle:"variable_category"},{kind:"category",name:"Functions",custom:"PROCEDURE",categorystyle:"procedure_category"},{kind:"category",name:"Custom",colour:"#5CA699",contents:[{kind:"block",type:"string_length"},{kind:"block",type:"pm_set_color"},{kind:"block",type:"pm_exec_chain_constantly"},{kind:"block",type:"pm_delay_seconds"},{kind:"block",type:"pm_move_by_velocity"}]}]}},364:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var i=n(5893),o=n(624),l=n(9008),s=n.n(l),a=n(7294),d=n(2140).Z;function c(){let[e,t]=(0,a.useState)(!1),[i,o]=(0,a.useState)(null);return(0,a.useEffect)(()=>{t(!0),o(n(5569))},[t,o]),{rendered:e,AFRAME:i}}function p(e){e.registerComponent("test0",{schema:{following:{type:"boolean",default:!1},rotating:{type:"boolean",default:!1}},init:function(){let e=this.data;this.el.addEventListener("mouseenter",function(){e.rotating=!0}),this.el.addEventListener("mouseleave",function(){e.rotating=!1}),this.el.addEventListener("click",function(){e.following=!0})},tick(e,t){let n=this.data;if(n.following){let e=this.el.getAttribute("position");e.y>10?(this.el.setAttribute("position",{x:-1,y:.5,z:-3}),n.following=!1):this.el.setAttribute("position",{...e,y:e.y+.01*t})}if(n.rotating){let e=this.el.getAttribute("rotation");this.el.setAttribute("rotation",{...e,y:e.y+.1*t})}}}),e.registerComponent("velocity",{dependencies:["position"],schema:{type:"vec3",default:{x:0,y:0,z:0}},tick(e,t){let n=this.data,i=this.el.getAttribute("position"),o=i.x+n.x*t*.001,l=i.y+n.y*t*.001,s=i.z+n.z*t*.001,a={x:o,y:l,z:s};this.el.setAttribute("position",a)}}),e.registerComponent("scriptable",{schema:{type:"boolean",default:!0}})}function r(){let{rendered:e,AFRAME:t}=c(),[n,l]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{t&&!n&&(console.log(t),l(!0),p(t))},[t,n,l]),e&&n)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s(),{children:[(0,i.jsx)("title",{children:"Coblockly"}),(0,i.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)("main",{children:[(0,i.jsxs)(o.xs,{cursor:"rayOrigin: mouse",children:[(0,i.jsx)(o.xu,{id:"box1",position:{x:-1,y:.5,z:-3},rotation:{x:0,y:45,z:0},color:"#4CC3D9",test0:{},velocity:{x:0,y:0,z:0},scriptable:!0}),(0,i.jsx)(o.xu,{id:"box2",position:{x:3,y:.5,z:-2},rotation:{x:0,y:45,z:0},color:"#F0C3D9",velocity:{x:0,y:0,z:0},scriptable:!0}),(0,i.jsx)(o.JO,{position:{x:0,y:0,z:-4},rotation:{x:-90,y:0,z:0},width:10,height:10,color:"#7BC8A4"}),(0,i.jsx)(o.q6,{color:"#ECECEC"}),(0,i.jsx)(o.V1,{position:{x:3,y:1.6,z:4},children:(0,i.jsx)(o.CF,{})})]}),(0,i.jsx)(d,{})]})]}):(0,i.jsx)(i.Fragment,{children:"loading"})}},9629:function(e){e.exports={"editor-wrapper":"Editor_editor-wrapper__n8Qq8","editor-contianer":"Editor_editor-contianer__ujgEp"}}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[978,446,672,774,888,179],function(){return t(8312)}),_N_E=e.O()}]);